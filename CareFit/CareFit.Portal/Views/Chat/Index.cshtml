@model CareFit.Portal.Models.Chat.indexVM

<link href="~/Content/css/Global/NavBarOrientation.css" rel="stylesheet" />
<script src="~/Content/js/Chat/index.js"></script>


<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">Central de Mensagens</h1>
    </div>
    <!-- /.col-lg-12 -->
</div>

<div class="row">
    <div class="col-lg-10">
        <div class="panel panel-default">
            <div class="panel-heading">
                <i class="fa fa-bar-chart-o fa-fw"></i>Mensagens
            </div>
            <div class="panel-body">
                <div class="alert alert-warning alert-dismissable" id="chat-no-message-alert">
                    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
                    <strong>Atenção!</strong> Você não possue mensagens!
                </div>
                <div class="tabbable tabs-left">
                    <ul class="nav nav-tabs" id="chat-header">
                        @{
                            var firstChat = true;
                        }
                        @foreach (var friend in Model.FriendsChat)
                        {
                            var active = firstChat ? "active" : "";
                            firstChat = false;
                            <li id="chat-header-@friend.ID" friend-id="@friend.ID" class="@active">
                                <a href="#friend-chat-@friend.ID" data-toggle="tab">@friend.Nome @friend.Sobrenome
                                    <span class="" id="alert-friend-message-@friend.ID" style="display:none">0</span>
                                </a>
                            </li>    
                        }


                    </ul>
                    <div class="tab-content" id="chats-content">
                        @{
                            firstChat = true;
                        }

                        @foreach (var friend in Model.FriendsChat)
                        {
                            var active = firstChat ? "active" : "";
                            firstChat = false;
                            <div class="tab-pane @active" id="friend-chat-@friend.ID" friend-id="@friend.ID" title="Iniciar bate papo com @friend.Nome @friend.Sobrenome">
                            </div>    
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>



    <div class="col-lg-2">
        <div class="panel panel-default">
            <div class="panel-heading">
                <i class="fa fa-users fa-fw"></i>Amigos
            </div>
            <div class="table-responsive">
                <table class="table">
                    <tbody>
                        @foreach (var friend in Model.Friends)
                        {
                            var imageUrl = friend.Imagens != null ? friend.Imagens.Url : @"\Uploads\Images\no-image.png";
                            <tr>
                                <td>
                                    <img src="@imageUrl" class="xs-avatar "></td>
                                <td>@friend.Nome @friend.Sobrenome</td>
                                <td>
                                    <button class="btn btn-default" friend-id="@friend.ID" friend-name="@friend.Nome @friend.Sobrenome" id="friend-new-chat-@friend.ID"><i class="fa fa-comments-o"></i></button>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>

</div>


